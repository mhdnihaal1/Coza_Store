<% include('../layouts/header.ejs') %>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Product</title>

<style>
  body {
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f8f8f8;
  }

  .container {
    max-width: 600px;
    margin: 50px auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

  h1 {
    text-align: center;
    color: #333;
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  label {
    font-weight: bold;
    margin-bottom: 8px;
    color: #333;
  }

  input,
  textarea {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }

  button {
    padding: 12px;
    background-color: #4caf50;
    color: #fff;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.3s;
  }

  button:hover {
    background-color: #45a049;
  }
 
    .body {
      background-image: url('/adminAsset/vendor/src/assets/images/backgrounds/bg2.jpg');
            background-size: cover;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            align-items: center;
            justify-content: center;
            background-color: #f8f8f8;

        }


</style>

<body>

  <div class="container">
    <a href="/productDetails">
      <span>
      <button>Go to product</button>
    </span>
      </a>
    <h1>Edit Product</h1>
    <form action="/editproduct/" method="post" enctype="multipart/form-data" >
        <!-- Hidden input to send the product ID along with the form submission -->
        <input type="hidden" name="_method" value="post">
        
        <!-- Display Product ID -->
    
        <input type="hidden" name="_id" value="<%= product._id %>">
      
        <label for="productName">Product Name:</label>
        <input type="text" id="productName" name="productName" value="<%= product.productName %>" required>
      
        <label for="categoryName" name="category">Category :</label>
        <select id="categoryId" name="categoryName" style="width: 100%; height: 40px;">
          <option value="<%= product.productCategory %>"><%= product.productCategory %></option>
          <% category.forEach(category => { %>
          <option value="<%= category.category %>">
            <%= category.category %>
          </option>
          <% }); %>
        </select>

        <label for="productPrice">Product Price:</label>
        <input type="number" id="productPrice" name="productPrice" value="<%= product.productPrice %>" min="0" step="1" required>
      
        <label for="productQuantity">Quantity:</label>
        <input type="number" id="productQuantity" name="productQuantity" value="<%= product.productQuantity %>" min="1" required>
      
        <label for="productDescription">Description:</label>
        <input id="productDescription" name="productDescription"  value="<%= product.productDescription %>"required>
      
        <label for="productDetails">Product Details:</label>
        <input id="productDetails" name="productDetails" value="<%= product.productDetails %>"required>
      
        <label for="productImage">Product Image :</label>
        <div style="display: flex; flex-wrap: wrap;">
          <% product.productImage.forEach((imagePath, index) => { %>
              <img src="<%= imagePath %>" alt="ProductImage" style="margin: 5px;" width="50" height="50" id="imageview">
          <% }); %>
      </div>
      
        <!-- <input type="file" id="Images" name="Images" multiple required> -->
        <input type="file" class="custom-file-input" id="productImage" name="productImage" accept="productImage/*"   onchange="imageview(event)" >
        <input type="file" class="custom-file-input" id="productImage" name="productImage" accept="productImage/*"   onchange="imageview(event)">
        <input type="file" class="custom-file-input" id="productImage" name="productImage" accept="productImage/*"   onchange="imageview(event)">
        <input type="file" class="custom-file-input" id="productImage" name="productImage" accept="productImage/*"   onchange="imageview(event)">

    
    <!-- <td>
        <img src="<%=product.productImage %>" alt="Product Image" width="50" height="60">
      </td> -->
        <button type="submit" class="actionbtn" id="submitButton" >Update Product</button>
      </form>
      
  </div>

</body>
<script>

//--------------------------------- for edit product-----------------------------


function imageview (event){
  document.getElementById('imageview').src=URL.createObjectURL(event.target.files)
}
// const button = document.getElementById('submitButton')
// button.addEventListener('click', function() {
//   console.log('hii');
//     var productName = document.querySelector('input[name="productName"]').value;
//     var productPrice = document.querySelector('input[name="productPrice"]').value;
//     var productQuantity = document.querySelector('input[name="productQuantity"]').value;
//     var productDescription = document.querySelector('input[name="productDescription"]').value;
//     var productDetails = document.querySelector('input[name="productDetails"]').value;
//     var productId = document.querySelector('input[name="productid"]').value;
//     var productImage = document.querySelector('input[name="productImage"]').files[0,1,2,3];


//     var formData = new FormData(); // Create a new FormData instance
//     formData.append('productName', productName);
//     formData.append('productPrice', productPrice);
//     formData.append('productQuantity', productQuantity);
//     formData.append('productDescription', productDescription);
//     formData.append('productDetails', productDetails);
//     formData.append('productId', productId);
//     formData.append('productImage', productImage); // Append the file to the FormData instance

// console.log(formData);
//     fetch('/editproduct', {
//         method: 'POST',
//         body: formData // Send the FormData instance instead of JSON
//     }).then(response => {
//         if (!response.ok) {
//             throw new Error('Network response was not ok');
//         }
//         return response.json(); // Parse the response as JSON
//     }).then(data => {
//         window.location.href = "/productDetails";
//     }).catch(error => {
//         console.error('There has been a problem with your fetch operation:', error);
//     });
// });

  
 </script>

<% include('../layouts/footer.ejs') %>
